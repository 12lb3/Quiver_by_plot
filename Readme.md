[toc]

## 1. Introduction

To be finished.

### 1.1 Features/Why I wrote this

+ More flexibility than the built-in function `quiver`.

  The arrows are generated by `plot`/`patch`, which provides the possibility that everything can be adjusted. Here are some of the examples:

  + The length of head (fixed length, or a ratio to the arrow length, etc.)
  + Angles between two edges of head. 
  + Show/hide the head of arrows.

  + Show/hide the body of arrows. 
  + Other properties in `plot` or `patch`.
  + ...

+ Colorful arrows adopted to current colormap

+ Support creating vector time series

+ "Perfect" arrows

  

### 1.2 Functions included

+ `FUN_quiver_by_plotV2.m`

  Plot single color arrows by `plot`

  <img src="doc/1.2/Example_1.2a.jpg" alt="Example_1.2a" style="zoom: 33%;" />

  

+ `FUN_quiver_by_plotV2_mmap.m`

  This is same as `FUN_quiver_by_plotV2.m` but compatible with [`mmap`](https://www.eoas.ubc.ca/~rich/mapug.html)

  <img src="doc/1.2/Example_1.2b.jpg" alt="Example_1.2b" style="zoom:33%;" />

  

+ `FUN_quiver_by_plotV2_cmap_patch.m`

  Plot colorful arrows based on `patch`. The color of arrows depends on colormap.

  <img src="doc/1.2/Example_1.2c.jpg" alt="Example_1.2c" style="zoom:33%;" />

  

+ `FUN_quiver_by_plotV2_cmap_patch_mmap.m`

  This is same as `FUN_quiver_by_plotV2_cmap_patch.m` but compatible with [`mmap`](https://www.eoas.ubc.ca/~rich/mapug.html)

  <img src="doc/1.2/Example_1.2d.jpg" alt="Example_1.2d" style="zoom:33%;" />

  

+ `FUN_quiver_by_plotV2_preset_cmap.m`

  [not recommended!] This is similar to `FUN_quiver_by_plotV2_cmap_patch` but the color is defined based on a fixed colormap, which must be specified 



### Limitation

**To create a *perfect* arrow, the `xlim` and `ylim` must be defined explicitly and it should not be changed after calling this toolbox.**



## 2. Install

You need to add this to the searching path of your Matlab environment before using them. The `private` folder must be put in the same folder as `FUN_quiver_by_plotV2*.m`.  The subfolders (`private`, `doc`) should not be added to the searching path. It can be done by two ways:

#### If you have GUI access to Matlab : 

Click "Home tab> Set Path". It will open a dialog for setting the path. Then, click "Add Folder...", add the root path of this package (the folder contains functions `FUN_quiver_by_plotV2*.m`), then click "Save" near the bottom of the dialog.  

#### If you are in a command line environment:

+ Method 1 (recommended):

  ```
  addpath('/path/to/Quiver_by_plotV2/');
  savepath
  ```

+ Method 2: 
  Matlab will run `startup.m` during boot automatically if the file exists. Thus, you can add `addpath('/path/to/Quiver_by_plotV2/');` to the `startup.m` file and make sure that the `startup.m` is put in existing searching path. This provide more flexibility.



## 3. Examples

to be finished.

### 3.1 Plot arrows.

to be finished.

### 3.2 Plot colorful arrows

### 3.2.1 Example 2.1: A simple case

In this case, the color is defined by the length of arrows, which is usually the magnitude of velocities.

```matlab

% prepare data
x = 1:40;
y = 1:30;

[X,Y] = meshgrid(x,y);
X=X';
Y=Y';

u = sin( 2*pi/30 .* X );
v = cos( 2*pi/30 .* Y );

% plot
figure

arrow_scale = 0; % 0: the scale is determined by the script automatically.
FUN_quiver_by_plotV2_cmap_patch( x, y, u, v, arrow_scale );

grid on
box on
xlabel('x');
ylabel('y');
colorbar

title({'Example 1: a simple case', 'Color is defined by the magnitude of arrows'});


```

<img src="doc/Example_2.1.jpg" alt="Example_1" style="zoom:67%;" />

#### 3.2 Example 2.2: the color is defined by a given matrix

In this example, the arrow color is defined in parameter `zval`.

```matlab
figure

arrow_scale = 0; 

value_for_color = sqrt(X.^2+Y.^2);
FUN_quiver_by_plotV2_cmap_patch( x, y, u, v, arrow_scale, 'zval', value_for_color );

grid on
box on

xlabel('x');
ylabel('y');

colorbar

title({'Example 2.2: Color is defined by parameter "zval"'});
```

<img src="doc/Example_2.1.jpg" alt="Example_2.1" style="zoom:67%;" />



## 4. Acknowledgements



